---
import MainLayout from "@/layouts/MainLayout/index.astro";
import {
  Card,
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
} from "@/components/ui/card";
import { getUpcomingHolidays } from "@/services/api/getUpcomingHolidays";
import { inferHoliday, formatDate } from "@/pages/_utils";
import TypographyP from "@/components/ui/typography/p.astro";

const upcomingHolidays = await getUpcomingHolidays();

const closestHoliday = upcomingHolidays[0];
const parsedClosestHoliday = inferHoliday(closestHoliday.holiday_date);
---

<MainLayout>
  <div class="flex flex-col gap-2 sm:scale-125 lg:scale-150">
    <Card className="bg-red-50 max-w-md mx-auto">
      <CardHeader>
        <CardDescription className="text-xs">
          Hari Libur Terdekat Berikutnya
        </CardDescription>
        <CardTitle className="text-xl lg:text-2xl">
          {closestHoliday.holiday_name}
        </CardTitle>
      </CardHeader>
      <CardContent className="text-sm">
        <TypographyP>
          {parsedClosestHoliday.formattedDate}
        </TypographyP>
        <TypographyP className="text-red-500 text-xs">
          {parsedClosestHoliday.commentary}
        </TypographyP>
      </CardContent>
    </Card>

    <TypographyP className="text-center text-xs opacity-80">
      Hari ini: {formatDate(new Date())}
    </TypographyP>
  </div>
</MainLayout>
