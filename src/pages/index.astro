---
import MainLayout from "@/layouts/MainLayout/index.astro";
import {
  Card,
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
} from "@/components/ui/card";
import { getUpcomingHolidays } from "@/services/api/getUpcomingHolidays";
import { inferHoliday } from "@/pages/_utils";
import TypographyP from "@/components/ui/typography/p.astro";

const upcomingHolidays = await getUpcomingHolidays();

const closestHoliday = upcomingHolidays[0];
const parsedClosestHoliday = inferHoliday(closestHoliday.holiday_date);
---

<MainLayout>
  <Card className="bg-red-50">
    <CardHeader>
      <CardDescription className="text-xs">
        Hari Libur Terdekat Berikutnya
      </CardDescription>
      <CardTitle className="text-xl lg:text-2xl">
        {closestHoliday.holiday_name}
      </CardTitle>
    </CardHeader>
    <CardContent className="text-sm">
      <TypographyP>
        {parsedClosestHoliday.formattedDate}
      </TypographyP>
      <TypographyP className="text-red-500 text-xs">
        {parsedClosestHoliday.commentary}
      </TypographyP>
    </CardContent>
  </Card>
</MainLayout>
